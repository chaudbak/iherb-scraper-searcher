!function(){function a(a,b){Array.prototype.push.apply(a,b)}function b(a,b){Array.prototype.unshift.apply(a,b)}function c(b){b&&(a(i.pages,i.data.splice(i.results_per_page)),i.total_results=i.data.length+i.pages.length,i.total_pages=Math.ceil(i.total_results/i.results_per_page),i.page_no=1);var c=nunjucks.render("results.html",i);document.getElementById("results").innerHTML=c}function d(){var a=$.getJSON("data/results.json"),b=$.getJSON("data/nutrients.json");nunjucks.configure({watch:!1}),Promise.all([a,b]).then(function(a){i.data=a[0],i.allnutrients=a[1],c(!0)})}function e(a){return!a||a&&a.percent_dv<g}function f(a){var b=Object.keys(i.checkedBox);return b.every(function(b){var c=a[b];return!!(c&&c.percent_dv>=g)})}var g=100,h=["Vitamins","Minerals","Trace Elements","Enzymes","Probiotics","Macronutrients","Amino Acids"],i={pages:[],page_no:1,total_pages:1,total_results:1,results_per_page:100,removed:[],data:[],checkedBox:{},categories:h};$(document).on("click",function(d){var e=d.target.dataset,f=e.key,g=e.navigate;if(f){var h=window.localStorage,j=h.getItem(f)||1;i.data=i.data.sort(function(a,b){return(a[f]-b[f])*j}),h.setItem(f,-1*j),c(!0)}else if(g){if("next"===g){var k=i.results_per_page;a(i.pages,i.data.splice(0)),a(i.data,i.pages.splice(0,k)),i.page_no+=1}else{b(i.pages,i.data.splice(0));var k=i.pages.length-i.results_per_page,l=i.pages.splice(k,i.results_per_page);a(i.data,l),i.page_no-=1}c(!1)}}),$(document).on("change",function(b){var d=b.target;a(i.data,i.pages.splice(0));{var g=i.data,h=i.removed,j=d.parentElement.textContent.trim();d.dataset.category}if(delete i.checkedBox[j],d.checked){i.checkedBox[j]="checked";for(var k=0;k<g.length;k++){var l=g[k].nutrients[j];e(l)&&(h.push(g.splice(k,1)[0]),k-=1)}return c(!0)}if(h.length>0){for(var k=0;k<h.length;k++){var m=h[k].nutrients,n=m[j];e(n)&&f(m)&&(i.data.push(h.splice(k,1)[0]),k-=1)}return c(!0)}}),d(),WebFontConfig={google:{families:["Titillium+Web:400,700:latin"]}};var j=document.createElement("script");j.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",j.type="text/javascript",j.async="true";var k=document.getElementsByTagName("script")[0];k.parentNode.insertBefore(j,k)}();